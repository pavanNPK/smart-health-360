<div class="flex align-items-center justify-content-center min-h-screen surface-ground">
  <p-card styleClass="shadow-4 border-round-xl w-full max-w-30rem" class="verify-card">
    <ng-template pTemplate="header">
      <div class="flex flex-column align-items-center gap-2 pt-4">
        <i class="pi pi-key text-5xl text-primary"></i>
        <h1 class="m-0 text-2xl font-semibold text-900">Set your password</h1>
        <span class="text-600 text-sm text-center px-3">Enter the 6-digit code from your email and choose a password. You received this link because an admin created your account.</span>
      </div>
    </ng-template>
    <form (ngSubmit)="onSubmit()" class="flex flex-column gap-3">
      <div class="flex flex-column gap-2">
        <label for="ve-email" class="font-medium text-900">Email *</label>
        <input id="ve-email" pInputText type="email" [(ngModel)]="email" name="email" required placeholder="your@email.com" class="w-full" />
      </div>
      <div class="flex flex-column gap-2">
        <label for="ve-otp" class="font-medium text-900">6-digit code (numbers only) *</label>
        <input id="ve-otp" pInputText type="text" [(ngModel)]="otp" name="otp" maxlength="6" placeholder="000000" pattern="[0-9]*" inputmode="numeric" class="w-full" />
      </div>
      <div class="flex flex-column gap-2">
        <label for="ve-password" class="font-medium text-900">New password *</label>
        <input id="ve-password" pInputText type="password" [(ngModel)]="password" name="password" required minlength="6" placeholder="Min 6 characters" class="w-full" />
      </div>
      <div class="flex flex-column gap-2">
        <label for="ve-confirm" class="font-medium text-900">Confirm password *</label>
        <input id="ve-confirm" pInputText type="password" [(ngModel)]="confirmPassword" name="confirmPassword" required placeholder="Repeat password" class="w-full" />
      </div>
      @if (error) {
        <p-message severity="error" [text]="error" styleClass="w-full"></p-message>
      }
      @if (success) {
        <p-message severity="success" [text]="success" styleClass="w-full"></p-message>
      }
      <div class="flex flex-column gap-2">
        <p-button type="submit" [label]="loading ? 'Verifyingâ€¦' : 'Verify and set password'" icon="pi pi-check" [loading]="loading" [disabled]="loading" styleClass="w-full" />
        <p-button type="button" label="Resend OTP" icon="pi pi-refresh" [loading]="resendLoading" [disabled]="resendLoading" (onClick)="resendOtp()" styleClass="p-button-outlined w-full" />
      </div>
    </form>
    <ng-template pTemplate="footer">
      <a routerLink="/login" class="flex align-items-center gap-1 text-primary no-underline font-medium">
        <i class="pi pi-arrow-left"></i> Back to login
      </a>
    </ng-template>
  </p-card>
</div>
