<div class="layout-wrapper flex min-h-screen">
  <!-- Side panel menu (classic) -->
  <aside class="sidebar surface-section border-right-1 surface-border">
    <div class="sidebar-header flex align-items-center gap-2 px-3 py-3 border-bottom-1 surface-border">
      <i class="pi pi-building text-2xl" style="color: var(--brand-primary);"></i>
      <a routerLink="/" class="no-underline font-semibold text-xl text-900">Smart Health 360</a>
    </div>
    <nav class="sidebar-nav flex flex-column flex-grow-1 py-2">
      @if (user?.role === 'SUPER_ADMIN') {
        <a routerLink="/admin/dashboard" routerLinkActive="sidebar-link-active" class="sidebar-link flex align-items-center gap-2 px-3 py-2 no-underline text-700">
          <i class="pi pi-th-large"></i>
          <span>Dashboard</span>
        </a>
      }
      @if (user?.role === 'DOCTOR') {
        <a routerLink="/doctor/dashboard" routerLinkActive="sidebar-link-active" class="sidebar-link flex align-items-center gap-2 px-3 py-2 no-underline text-700">
          <i class="pi pi-th-large"></i>
          <span>Dashboard</span>
        </a>
      }
      @if (canAccess('RECEPTIONIST')) {
        <a routerLink="/reception/patients" routerLinkActive="sidebar-link-active" [routerLinkActiveOptions]="{ exact: false }" class="sidebar-link flex align-items-center gap-2 px-3 py-2 no-underline text-700">
          <i class="pi pi-users"></i>
          <span>Patients</span>
        </a>
      }
      @if (canAccess('SUPER_ADMIN')) {
        <div class="px-3 py-1 text-500 text-sm font-semibold">Admin</div>
        <a routerLink="/admin/users" routerLinkActive="sidebar-link-active" class="sidebar-link flex align-items-center gap-2 px-3 py-2 no-underline text-700">
          <i class="pi pi-id-card"></i>
          <span>Users</span>
        </a>
        <a routerLink="/admin/areas" routerLinkActive="sidebar-link-active" class="sidebar-link flex align-items-center gap-2 px-3 py-2 no-underline text-700">
          <i class="pi pi-map"></i>
          <span>Areas</span>
        </a>
        <a routerLink="/admin/clinics" routerLinkActive="sidebar-link-active" class="sidebar-link flex align-items-center gap-2 px-3 py-2 no-underline text-700">
          <i class="pi pi-building"></i>
          <span>Clinics</span>
        </a>
        <a routerLink="/admin/hierarchy" routerLinkActive="sidebar-link-active" class="sidebar-link flex align-items-center gap-2 px-3 py-2 no-underline text-700">
          <i class="pi pi-sitemap"></i>
          <span>Hierarchy</span>
        </a>
      }
      @if (canAccessAudit()) {
        <div class="px-3 py-1 mt-2 text-500 text-sm font-semibold">System</div>
        <a routerLink="/audit" routerLinkActive="sidebar-link-active" class="sidebar-link flex align-items-center gap-2 px-3 py-2 no-underline text-700">
          <i class="pi pi-history"></i>
          <span>Audit</span>
        </a>
      }
    </nav>
    <div class="sidebar-footer border-top-1 surface-border px-3 py-3">
      <div class="text-600 text-sm mb-2">{{ user?.name }}</div>
      <div class="text-500 text-xs mb-2">{{ user?.role }}</div>
      <p-button label="Logout" icon="pi pi-sign-out" severity="secondary" (onClick)="logout()" styleClass="w-full"></p-button>
    </div>
  </aside>
  <!-- Main content -->
  <main class="layout-main flex-grow-1 p-4 surface-ground overflow-auto">
    <router-outlet />
  </main>
</div>
