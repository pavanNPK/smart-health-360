<div class="flex flex-column gap-4">
  <h1 class="m-0 text-2xl font-semibold text-900">
    <i class="pi pi-history mr-2"></i>Audit Logs
  </h1>
  <p-card styleClass="shadow-2 border-round-lg">
    @if (loading) {
      <div class="flex align-items-center justify-content-center py-8">
        <i class="pi pi-spin pi-spinner text-4xl text-primary"></i>
      </div>
    } @else {
      <p-table [value]="logs" styleClass="p-datatable-sm p-datatable-striped" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>Time</th>
            <th>Action</th>
            <th>User</th>
            <th>Details</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-log>
          <tr>
            <td>{{ log.createdAt | date : 'short' }}</td>
            <td>{{ log.action }}</td>
            <td>{{ log.userId.name }} ({{ log.userId.email }})</td>
            <td><code class="text-sm surface-200 px-2 py-1 border-round">{{ log.details | json }}</code></td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="4" class="text-center py-4 text-600">No audit logs.</td>
          </tr>
        </ng-template>
      </p-table>
      <p class="text-600 text-sm mt-2">Page {{ page }} Â· {{ total }} total</p>
    }
  </p-card>
</div>
